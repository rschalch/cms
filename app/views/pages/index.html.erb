<% @page_title = 'Pages' %>
<div class="subjects index">
  <%= link_to('Subjects', {controller: :subjects}) %>

  <% if @page && @page.errors.any?  %>
    <h4><%= @page.errors.full_messages.join(' ') %></h4>
  <% end  %>

  <h2>Pages</h2>

  <%= link_to(image_tag('plus_sign.png', alt: 'plus-sign', size: '11x11') + ' Add New Page', {action: :new, :subject_id => @subject.id}, class: 'action new') %>

  <table class="listing" summary="Pages List">
    <tr class="header">
      <th>Position</th>
      <th>Subject</th>
      <th>Name</th>
      <th>Permalink</th>
      <th>Visible</th>
      <th>Actions</th>
    </tr>
    <% @pages.each do |page| %>
        <tr>
          <td><%= page.position %></td>
          <td><%= page.subject.name if page.subject %></td>
          <td><%= page.name %></td>
          <td><%= page.permalink %></td>
          <td class="center"><%= status_tag(page.visible) %></td>
          <td class="actions">
            <%= link_to('View Sections', {:controller => 'sections', :page_id => page.id }, class: 'action show') %>
            <%= link_to('Show', {action: :show, :subject_id => @subject.id, :id => page.id}, class: 'action show') %>
            <%= link_to('Edit', {action: :edit, :subject_id => @subject.id, :id => page.id}, class: 'action edit') %>
            <%= link_to('Delete', {action: :delete, :subject_id => @subject.id, :id => page.id}, class: 'action delete') %>
          </td>
        </tr>
    <% end %>
  </table>
</div>
